import { useState } from 'react';
import { useLocation, useNavigate } from 'react-router-dom';
import Sidebar from "./SidebarD.jsx";
import './FindWay.css';
import addbuttonimg from "../../image/Vector.png";
import axios from 'axios';

const FindWay = () => {
    const [addresses, setAddresses] = useState([
        { label: '', lat: null, lng: null },
        { label: '', lat: null, lng: null },
    ]);
    const location = useLocation();
    const midpoint = location.state?.midpoint;

    const [activeIndex, setActiveIndex] = useState(null);
    /*const [showAlert, setShowAlert] = useState(false); */
    
    const handleSelectAddress = (index, label, lat, lng) => {
    const newAddresses = [...addresses];
    newAddresses[index] = { label, lat, lng };
    setAddresses(newAddresses);
    setActiveIndex(null);
  };

    const handleAddFriend = () => {
        const newList = [...addresses];
        newList.splice(2, 0, { label: '', lat: null, lng: null });
        setAddresses(newList);
    };

    const navigate = useNavigate();

    const handleFindWay = async () => {
        // 최소 첫 번째 목적지는 반드시 입력되어야 함
        const allFilled = addresses[0].label && addresses[0].lat !== null && addresses[0].lng !== null;

        if (!allFilled) {
            alert("목적지를 입력해주세요.");
            return;
        }

        const filledAddresses = addresses.filter(addr => addr.label && addr.lat !== null && addr.lng !== null);

        // ✅ POST 보낼 데이터
        const waypoints = [
            { x: midpoint?.lng, y: midpoint?.lat }, // midpoint를 첫 번째로
            ...filledAddresses.map(addr => ({
                x: addr.lng,
                y: addr.lat
            }))
        ];

        const stopover = filledAddresses.slice(0, -1);

        const destination = filledAddresses[filledAddresses.length - 1];

        const postData = { waypoints };
        
        try {
            const response = await axios.post('https://your-backend.com/api/path', postData); // 여기에 실제 URI 입력
            console.log('경로 응답:', response.data);

            // ✅ 응답과 midpoint 함께 다음 페이지로 넘기기
            console.log('navigate할 때 stopover:', stopover);
            navigate('/optimalway', {
                state: {
                    destinationResult: response.data,
                    midpoint: { x: midpoint?.lat, y: midpoint?.lng },
                    stopover: stopover.map(addr => ({
                        x: addr.lng,
                        y: addr.lat
                    })),
                    destination: {
                        x: destination.lng,
                        y: destination.lat
                        }

                }
            });

        } catch (error) {
            console.error('경로 찾기 실패:', error);
            console.log('navigate할 때 stopover:', stopover);

            // ✅ mockData와 midpoint 함께 넘기기
            navigate('/optimalway', {
                state: {
                    destinationResult: {
                        "totalDuration": 2107,
                        "totalDistance": 16294,
                        "path": [
                            {
                                "x": 126.98304501994093,
                                "y": 37.571992286683226
                            },
                            {
                                "x": 126.9830309574162,
                                "y": 37.57136143681938
                            },
                            {
                                "x": 126.98302343616871,
                                "y": 37.57108204928633
                            },
                            {
                                "x": 126.98303855277355,
                                "y": 37.570802856758434
                            },
                            {
                                "x": 126.98300013758114,
                                "y": 37.57029794275241
                            },
                            {
                                "x": 126.9829797050707,
                                "y": 37.570135579303425
                            },
                            {
                                "x": 126.98295951766069,
                                "y": 37.56995519713311
                            },
                            {
                                "x": 126.98289528048825,
                                "y": 37.569684331311024
                            },
                            {
                                "x": 126.98287448078811,
                                "y": 37.569548995906175
                            },
                            {
                                "x": 126.98284322010808,
                                "y": 37.56935049746732
                            },
                            {
                                "x": 126.98281342986692,
                                "y": 37.569043886716976
                            },
                            {
                                "x": 126.98280309142021,
                                "y": 37.56897171432396
                            },
                            {
                                "x": 126.9827943458158,
                                "y": 37.56878242026776
                            },
                            {
                                "x": 126.98279520348636,
                                "y": 37.56871935475662
                            },
                            {
                                "x": 126.98274792271462,
                                "y": 37.568034155813315
                            },
                            {
                                "x": 126.98274358824358,
                                "y": 37.56752052475869
                            },
                            {
                                "x": 126.98272732279176,
                                "y": 37.567051842937644
                            },
                            {
                                "x": 126.98271931264179,
                                "y": 37.566808492652065
                            },
                            {
                                "x": 126.98270885201947,
                                "y": 37.566745329591114
                            },
                            {
                                "x": 126.98271068990117,
                                "y": 37.566610189165864
                            },
                            {
                                "x": 126.98267289106133,
                                "y": 37.56606022794891
                            },
                            {
                                "x": 126.98261196634003,
                                "y": 37.56554610905785
                            },
                            {
                                "x": 126.98260138342731,
                                "y": 37.56549195534111
                            },
                            {
                                "x": 126.9825169657284,
                                "y": 37.56504070683618
                            },
                            {
                                "x": 126.98245310161772,
                                "y": 37.56474281254306
                            },
                            {
                                "x": 126.98237742982067,
                                "y": 37.564480858107856
                            },
                            {
                                "x": 126.98213922223853,
                                "y": 37.56368588754598
                            },
                            {
                                "x": 126.98208471707196,
                                "y": 37.56353224044114
                            },
                            {
                                "x": 126.98183286805305,
                                "y": 37.562908349584696
                            },
                            {
                                "x": 126.98162371821422,
                                "y": 37.56247404536424
                            },
                            {
                                "x": 126.98151287213048,
                                "y": 37.56230189112446
                            },
                            {
                                "x": 126.98140165856147,
                                "y": 37.56215676487806
                            },
                            {
                                "x": 126.98120051826241,
                                "y": 37.56196581042261
                            },
                            {
                                "x": 126.98120051826241,
                                "y": 37.56196581042261
                            },
                            {
                                "x": 126.98130446181669,
                                "y": 37.56181353015377
                            },
                            {
                                "x": 126.98136362551895,
                                "y": 37.56162482173581
                            },
                            {
                                "x": 126.98143337046355,
                                "y": 37.56149026711622
                            },
                            {
                                "x": 126.9815380487226,
                                "y": 37.561283930413666
                            },
                            {
                                "x": 126.98157261430948,
                                "y": 37.56123917646704
                            },
                            {
                                "x": 126.98163042791325,
                                "y": 37.56114957091952
                            },
                            {
                                "x": 126.98176967044262,
                                "y": 37.560898480004575
                            },
                            {
                                "x": 126.98204827522754,
                                "y": 37.560387288239625
                            },
                            {
                                "x": 126.98226967712503,
                                "y": 37.55992065479788
                            },
                            {
                                "x": 126.98267778612477,
                                "y": 37.55904115013355
                            },
                            {
                                "x": 126.98274789366718,
                                "y": 37.558879566488045
                            },
                            {
                                "x": 126.98287568853792,
                                "y": 37.55863738592091
                            },
                            {
                                "x": 126.98307383366094,
                                "y": 37.55821560256647
                            },
                            {
                                "x": 126.98310900907815,
                                "y": 37.558125801233366
                            },
                            {
                                "x": 126.98314430684366,
                                "y": 37.55802699051102
                            },
                            {
                                "x": 126.98320358513844,
                                "y": 37.55782927156259
                            },
                            {
                                "x": 126.98326347520235,
                                "y": 37.557586505687375
                            },
                            {
                                "x": 126.98328929182054,
                                "y": 37.55735245678592
                            },
                            {
                                "x": 126.98328311636138,
                                "y": 37.55697396545894
                            },
                            {
                                "x": 126.98323130661927,
                                "y": 37.55662211242037
                            },
                            {
                                "x": 126.98323130661927,
                                "y": 37.55662211242037
                            },
                            {
                                "x": 126.98317753855314,
                                "y": 37.556414409407566
                            },
                            {
                                "x": 126.98300308279664,
                                "y": 37.5559263434144
                            },
                            {
                                "x": 126.98300749069618,
                                "y": 37.55560200576003
                            },
                            {
                                "x": 126.98305765450453,
                                "y": 37.555242020463076
                            },
                            {
                                "x": 126.98576099668755,
                                "y": 37.54951661261557
                            },
                            {
                                "x": 126.98813492372751,
                                "y": 37.544689358039356
                            },
                            {
                                "x": 126.9882986906682,
                                "y": 37.54429430130313
                            },
                            {
                                "x": 126.98832205101485,
                                "y": 37.544240438721474
                            },
                            {
                                "x": 126.9884460345471,
                                "y": 37.54343957036201
                            },
                            {
                                "x": 126.98840649700891,
                                "y": 37.543015740194114
                            },
                            {
                                "x": 126.98839639964736,
                                "y": 37.542925549121016
                            },
                            {
                                "x": 126.98830028935028,
                                "y": 37.5425012342136
                            },
                            {
                                "x": 126.98823471477695,
                                "y": 37.542329473670925
                            },
                            {
                                "x": 126.9881478506928,
                                "y": 37.542058415621305
                            },
                            {
                                "x": 126.98802813957559,
                                "y": 37.54170598187716
                            },
                            {
                                "x": 126.98780927888,
                                "y": 37.54115446804368
                            },
                            {
                                "x": 126.98760173568449,
                                "y": 37.54060305080533
                            },
                            {
                                "x": 126.98744869559548,
                                "y": 37.54020527836479
                            },
                            {
                                "x": 126.98738336856763,
                                "y": 37.540015498509305
                            },
                            {
                                "x": 126.98717595335864,
                                "y": 37.53945507109262
                            },
                            {
                                "x": 126.98706756485116,
                                "y": 37.5391027333892
                            },
                            {
                                "x": 126.98700211780557,
                                "y": 37.53892196273218
                            },
                            {
                                "x": 126.98682877226622,
                                "y": 37.538352816437374
                            },
                            {
                                "x": 126.98676576464055,
                                "y": 37.537991857303794
                            },
                            {
                                "x": 126.9867358459153,
                                "y": 37.53769425529339
                            },
                            {
                                "x": 126.98673889372517,
                                "y": 37.53746901985179
                            },
                            {
                                "x": 126.98676603208698,
                                "y": 37.53713586553781
                            },
                            {
                                "x": 126.98681908900615,
                                "y": 37.53655965101995
                            },
                            {
                                "x": 126.98683345015287,
                                "y": 37.536334512598124
                            },
                            {
                                "x": 126.98683345015287,
                                "y": 37.536334512598124
                            },
                            {
                                "x": 126.98692593137075,
                                "y": 37.53535316518024
                            },
                            {
                                "x": 126.98697350123255,
                                "y": 37.5351823743864
                            },
                            {
                                "x": 126.9870669342274,
                                "y": 37.53496692463486
                            },
                            {
                                "x": 126.9871367649081,
                                "y": 37.53482335610848
                            },
                            {
                                "x": 126.98735561954463,
                                "y": 37.53453689803897
                            },
                            {
                                "x": 126.98771072041437,
                                "y": 37.53421556566243
                            },
                            {
                                "x": 126.9888324493203,
                                "y": 37.53326105555048
                            },
                            {
                                "x": 126.98897027599902,
                                "y": 37.533109057596555
                            },
                            {
                                "x": 126.98908498925653,
                                "y": 37.53299290350603
                            },
                            {
                                "x": 126.98916551936368,
                                "y": 37.53289447765183
                            },
                            {
                                "x": 126.9893498131637,
                                "y": 37.532652772243694
                            },
                            {
                                "x": 126.98968360714221,
                                "y": 37.53223213616772
                            },
                            {
                                "x": 126.98992579948816,
                                "y": 37.53189180991745
                            },
                            {
                                "x": 126.9909525673588,
                                "y": 37.53042286947153
                            },
                            {
                                "x": 126.99119535467446,
                                "y": 37.53003749313808
                            },
                            {
                                "x": 126.99128876884153,
                                "y": 37.52982203958974
                            },
                            {
                                "x": 126.9913394794073,
                                "y": 37.52941700117017
                            },
                            {
                                "x": 126.99140404957403,
                                "y": 37.52882286098571
                            },
                            {
                                "x": 126.9916056697434,
                                "y": 37.527292800889
                            },
                            {
                                "x": 126.99173358768206,
                                "y": 37.52619461407226
                            },
                            {
                                "x": 126.9917943925527,
                                "y": 37.525879766212945
                            },
                            {
                                "x": 126.9918526507441,
                                "y": 37.52575411675283
                            },
                            {
                                "x": 126.99216462349924,
                                "y": 37.525270213236254
                            },
                            {
                                "x": 126.99284438962,
                                "y": 37.52435694251329
                            },
                            {
                                "x": 126.9929365805354,
                                "y": 37.524231581838016
                            },
                            {
                                "x": 126.9929365805354,
                                "y": 37.524231581838016
                            },
                            {
                                "x": 126.9932505979471,
                                "y": 37.52359451436899
                            },
                            {
                                "x": 126.99337878047444,
                                "y": 37.523316281798614
                            },
                            {
                                "x": 126.99347302684758,
                                "y": 37.52303775985617
                            },
                            {
                                "x": 126.9934872434516,
                                "y": 37.522821629244774
                            },
                            {
                                "x": 126.99360992099257,
                                "y": 37.52211084587034
                            },
                            {
                                "x": 126.99411972129046,
                                "y": 37.519529177098164
                            },
                            {
                                "x": 126.99417917980246,
                                "y": 37.51931343156519
                            },
                            {
                                "x": 126.9943073512162,
                                "y": 37.519035197630565
                            },
                            {
                                "x": 126.99445899013483,
                                "y": 37.51869408985555
                            },
                            {
                                "x": 126.99506432346769,
                                "y": 37.51741975113134
                            },
                            {
                                "x": 126.99535494675382,
                                "y": 37.5168365410234
                            },
                            {
                                "x": 126.99634423801032,
                                "y": 37.51476352559626
                            },
                            {
                                "x": 126.99679825144074,
                                "y": 37.51380325858529
                            },
                            {
                                "x": 126.99746125976621,
                                "y": 37.512439290825775
                            },
                            {
                                "x": 126.99825250596427,
                                "y": 37.5107880701754
                            },
                            {
                                "x": 126.99833540763883,
                                "y": 37.510509447357315
                            },
                            {
                                "x": 126.99851071319972,
                                "y": 37.51008743976397
                            },
                            {
                                "x": 126.99858001635835,
                                "y": 37.50997990118956
                            },
                            {
                                "x": 126.99887082297181,
                                "y": 37.50937866189978
                            },
                            {
                                "x": 126.99894060622519,
                                "y": 37.50923508510423
                            },
                            {
                                "x": 126.99969773615172,
                                "y": 37.50759257487751
                            },
                            {
                                "x": 126.99969773615172,
                                "y": 37.50759257487751
                            },
                            {
                                "x": 126.9999721669404,
                                "y": 37.50736963563033
                            },
                            {
                                "x": 126.99999562701431,
                                "y": 37.50730676061682
                            },
                            {
                                "x": 127.00083451916574,
                                "y": 37.505466703006896
                            },
                            {
                                "x": 127.0010551545033,
                                "y": 37.50503606402977
                            },
                            {
                                "x": 127.0012742269883,
                                "y": 37.50472254818326
                            },
                            {
                                "x": 127.00266490765729,
                                "y": 37.503058340412764
                            },
                            {
                                "x": 127.0029063452731,
                                "y": 37.50276303124323
                            },
                            {
                                "x": 127.00300980083531,
                                "y": 37.50263775708037
                            },
                            {
                                "x": 127.00335433083164,
                                "y": 37.502244201209365
                            },
                            {
                                "x": 127.00349338713781,
                                "y": 37.50199307956403
                            },
                            {
                                "x": 127.00370340641014,
                                "y": 37.50150828250495
                            },
                            {
                                "x": 127.00405385148504,
                                "y": 37.4998172578169
                            },
                            {
                                "x": 127.00418936966713,
                                "y": 37.49898042071001
                            },
                            {
                                "x": 127.00436473366322,
                                "y": 37.49854939322235
                            },
                            {
                                "x": 127.00479401320706,
                                "y": 37.49773305181023
                            },
                            {
                                "x": 127.00509662610573,
                                "y": 37.49708684216675
                            },
                            {
                                "x": 127.00582896719338,
                                "y": 37.49558824766726
                            },
                            {
                                "x": 127.0065730631959,
                                "y": 37.494053704760304
                            },
                            {
                                "x": 127.00671185435743,
                                "y": 37.49382059768764
                            },
                            {
                                "x": 127.00721166668295,
                                "y": 37.49279759701876
                            },
                            {
                                "x": 127.00738675968009,
                                "y": 37.492384583228166
                            },
                            {
                                "x": 127.00761945898458,
                                "y": 37.491890958137944
                            },
                            {
                                "x": 127.0076888509853,
                                "y": 37.4917744039156
                            },
                            {
                                "x": 127.0076888509853,
                                "y": 37.4917744039156
                            },
                            {
                                "x": 127.00799295004427,
                                "y": 37.49186706331714
                            },
                            {
                                "x": 127.0081393463199,
                                "y": 37.4919133452618
                            },
                            {
                                "x": 127.00844344652111,
                                "y": 37.492006003517474
                            },
                            {
                                "x": 127.00972746003265,
                                "y": 37.49239521661319
                            },
                            {
                                "x": 127.01083104685394,
                                "y": 37.492746863017224
                            },
                            {
                                "x": 127.01096613944048,
                                "y": 37.492793046824154
                            },
                            {
                                "x": 127.01096613944048,
                                "y": 37.492793046824154
                            },
                            {
                                "x": 127.0111332533215,
                                "y": 37.492983667282736
                            },
                            {
                                "x": 127.01108683638671,
                                "y": 37.49307338421377
                            },
                            {
                                "x": 127.01087736468571,
                                "y": 37.49352215790101
                            },
                            {
                                "x": 127.01062147230057,
                                "y": 37.494060647863755
                            },
                            {
                                "x": 127.01042330242437,
                                "y": 37.49450951529199
                            },
                            {
                                "x": 127.0103192761674,
                                "y": 37.49467984419995
                            },
                            {
                                "x": 127.01028464027375,
                                "y": 37.494733617296866
                            },
                            {
                                "x": 127.01028464027375,
                                "y": 37.494733617296866
                            },
                            {
                                "x": 127.0108590659007,
                                "y": 37.49490962872362
                            },
                            {
                                "x": 127.0108590659007,
                                "y": 37.49490962872362
                            },
                            {
                                "x": 127.01059209852589,
                                "y": 37.49543000465066
                            },
                            {
                                "x": 127.01053258869347,
                                "y": 37.49565476980763
                            },
                            {
                                "x": 127.01033429496555,
                                "y": 37.49611264644515
                            },
                            {
                                "x": 127.01033393827866,
                                "y": 37.49613967508437
                            },
                            {
                                "x": 127.0103446515335,
                                "y": 37.496184817547096
                            },
                            {
                                "x": 127.01040023910012,
                                "y": 37.4962573675573
                            },
                            {
                                "x": 127.01042261681945,
                                "y": 37.49627557609853
                            },
                            {
                                "x": 127.01050141442813,
                                "y": 37.49630326777406
                            },
                            {
                                "x": 127.01080553536467,
                                "y": 37.49639592017668
                            },
                            {
                                "x": 127.01080553536467,
                                "y": 37.49639592017668
                            },
                            {
                                "x": 127.01207844722572,
                                "y": 37.496776004442346
                            },
                            {
                                "x": 127.01207844722572,
                                "y": 37.496776004442346
                            },
                            {
                                "x": 127.01222580502207,
                                "y": 37.49675020505402
                            },
                            {
                                "x": 127.01231674226989,
                                "y": 37.496714923228716
                            },
                            {
                                "x": 127.01237375598652,
                                "y": 37.496679357724965
                            },
                            {
                                "x": 127.01240957780921,
                                "y": 37.496535488510965
                            },
                            {
                                "x": 127.01290933187882,
                                "y": 37.49551246334885
                            },
                            {
                                "x": 127.01290933187882,
                                "y": 37.49551246334885
                            },
                            {
                                "x": 127.01185044996994,
                                "y": 37.49519725235756
                            },
                            {
                                "x": 127.0108590659007,
                                "y": 37.49490962872362
                            },
                            {
                                "x": 127.01028464027375,
                                "y": 37.494733617296866
                            },
                            {
                                "x": 127.01011562213289,
                                "y": 37.494687148439034
                            },
                            {
                                "x": 127.01011562213289,
                                "y": 37.494687148439034
                            },
                            {
                                "x": 127.0101734676658,
                                "y": 37.4945885171405
                            },
                            {
                                "x": 127.01024309612036,
                                "y": 37.49445394235213
                            },
                            {
                                "x": 127.01045281206433,
                                "y": 37.49398715085134
                            },
                            {
                                "x": 127.01069704154511,
                                "y": 37.49347559522523
                            },
                            {
                                "x": 127.01090663299523,
                                "y": 37.49301781231507
                            },
                            {
                                "x": 127.01095328772313,
                                "y": 37.49291007635054
                            },
                            {
                                "x": 127.01095328772313,
                                "y": 37.49291007635054
                            },
                            {
                                "x": 127.01111277700451,
                                "y": 37.49282130602173
                            },
                            {
                                "x": 127.01248680273,
                                "y": 37.493247284859585
                            },
                            {
                                "x": 127.01330915397914,
                                "y": 37.493488430401
                            },
                            {
                                "x": 127.01352316389497,
                                "y": 37.493553291497356
                            },
                            {
                                "x": 127.01360195985718,
                                "y": 37.49358098109277
                            },
                            {
                                "x": 127.01371455947115,
                                "y": 37.49361796340784
                            },
                            {
                                "x": 127.01384977392739,
                                "y": 37.49365513439824
                            },
                            {
                                "x": 127.01391738120691,
                                "y": 37.49367371983604
                            },
                            {
                                "x": 127.01416519590825,
                                "y": 37.493747872487425
                            },
                            {
                                "x": 127.01443538910692,
                                "y": 37.49384023241702
                            },
                            {
                                "x": 127.01559543910402,
                                "y": 37.49420131606413
                            },
                            {
                                "x": 127.01677823362587,
                                "y": 37.494553567114025
                            },
                            {
                                "x": 127.01705985866347,
                                "y": 37.494637005659165
                            },
                            {
                                "x": 127.01771321705358,
                                "y": 37.49483166167602
                            },
                            {
                                "x": 127.01791592719862,
                                "y": 37.49489642088473
                            },
                            {
                                "x": 127.01840026582128,
                                "y": 37.4950446151364
                            },
                            {
                                "x": 127.01910993381497,
                                "y": 37.495257752429616
                            },
                            {
                                "x": 127.0200446995696,
                                "y": 37.49555384789666
                            },
                            {
                                "x": 127.0204616713453,
                                "y": 37.4956654326775
                            },
                            {
                                "x": 127.02097982569171,
                                "y": 37.495822907329035
                            },
                            {
                                "x": 127.021137428136,
                                "y": 37.49587827664428
                            },
                            {
                                "x": 127.02194852944503,
                                "y": 37.496119269038395
                            },
                            {
                                "x": 127.02256775571708,
                                "y": 37.4963316368095
                            },
                            {
                                "x": 127.02413356089016,
                                "y": 37.49680412005092
                            },
                            {
                                "x": 127.02427997714312,
                                "y": 37.49685038223058
                            },
                            {
                                "x": 127.02515836140691,
                                "y": 37.49713696112811
                            },
                            {
                                "x": 127.02587926010938,
                                "y": 37.497359161127186
                            },
                            {
                                "x": 127.02603686952008,
                                "y": 37.49741452398755
                            },
                            {
                                "x": 127.0269381172017,
                                "y": 37.49768325709589
                            },
                            {
                                "x": 127.02734356979225,
                                "y": 37.49781274388716
                            },
                            {
                                "x": 127.02754629662232,
                                "y": 37.49787748676719
                            },
                            {
                                "x": 127.02754629662232,
                                "y": 37.49787748676719
                            },
                            {
                                "x": 127.02766823190767,
                                "y": 37.49806771206318
                            },
                            {
                                "x": 127.02749382020153,
                                "y": 37.498435708965225
                            },
                            {
                                "x": 127.02697034078221,
                                "y": 37.49955771701745
                            },
                            {
                                "x": 127.02659736426885,
                                "y": 37.50041064630369
                            },
                            {
                                "x": 127.02620304909351,
                                "y": 37.5011642823298
                            },
                            {
                                "x": 127.02600506922843,
                                "y": 37.50160416683432
                            },
                            {
                                "x": 127.02555045099423,
                                "y": 37.50264564062267
                            },
                            {
                                "x": 127.02491147907897,
                                "y": 37.50394689645856
                            },
                            {
                                "x": 127.0246557667725,
                                "y": 37.50447640723021
                            },
                            {
                                "x": 127.02462090195512,
                                "y": 37.50454820366802
                            },
                            {
                                "x": 127.02462090195512,
                                "y": 37.50454820366802
                            },
                            {
                                "x": 127.02530841106416,
                                "y": 37.50473408941218
                            },
                            {
                                "x": 127.02586044854742,
                                "y": 37.50490083295906
                            },
                            {
                                "x": 127.02645760805154,
                                "y": 37.505076956368306
                            },
                            {
                                "x": 127.02779813722397,
                                "y": 37.50549347140862
                            },
                            {
                                "x": 127.02818124845464,
                                "y": 37.50560475044726
                            },
                            {
                                "x": 127.02898140215352,
                                "y": 37.505827583743766
                            },
                            {
                                "x": 127.02916165013231,
                                "y": 37.50588312856956
                            },
                            {
                                "x": 127.03056983227617,
                                "y": 37.50631818936106
                            },
                            {
                                "x": 127.03145977752801,
                                "y": 37.506595806062315
                            },
                            {
                                "x": 127.0323049570214,
                                "y": 37.506837007185474
                            },
                            {
                                "x": 127.0328458329672,
                                "y": 37.506994616217604
                            },
                            {
                                "x": 127.03388223774463,
                                "y": 37.50731846653175
                            },
                            {
                                "x": 127.03495258028153,
                                "y": 37.507642585060864
                            },
                            {
                                "x": 127.03601173852,
                                "y": 37.507957592106386
                            },
                            {
                                "x": 127.03723997198205,
                                "y": 37.50831902060296
                            },
                            {
                                "x": 127.0380174477497,
                                "y": 37.50855061859521
                            },
                            {
                                "x": 127.03847941167676,
                                "y": 37.50868953813633
                            },
                            {
                                "x": 127.04010201175713,
                                "y": 37.509171283613945
                            },
                            {
                                "x": 127.04072174444467,
                                "y": 37.50935652914007
                            },
                            {
                                "x": 127.04125134714764,
                                "y": 37.50951400825932
                            },
                            {
                                "x": 127.04238949845674,
                                "y": 37.50984762054357
                            },
                            {
                                "x": 127.0429866227504,
                                "y": 37.5100326709337
                            },
                            {
                                "x": 127.0432797610423,
                                "y": 37.51010712998009
                            },
                            {
                                "x": 127.04384318962038,
                                "y": 37.510273882035946
                            },
                            {
                                "x": 127.04384318962038,
                                "y": 37.510273882035946
                            },
                            {
                                "x": 127.04356209336284,
                                "y": 37.51102849194301
                            },
                            {
                                "x": 127.04337446264832,
                                "y": 37.51154958396852
                            },
                            {
                                "x": 127.04328041627946,
                                "y": 37.51182814905992
                            },
                            {
                                "x": 127.04308089606465,
                                "y": 37.51239419692898
                            },
                            {
                                "x": 127.04289394871893,
                                "y": 37.51286123032968
                            },
                            {
                                "x": 127.04256667002366,
                                "y": 37.5136875475089
                            },
                            {
                                "x": 127.04240233719385,
                                "y": 37.514154763306045
                            },
                            {
                                "x": 127.04234382729898,
                                "y": 37.51430746807005
                            },
                            {
                                "x": 127.04206200902989,
                                "y": 37.515116131092796
                            },
                            {
                                "x": 127.04206200902989,
                                "y": 37.515116131092796
                            },
                            {
                                "x": 127.04227610630689,
                                "y": 37.51518094106116
                            },
                            {
                                "x": 127.04247900835772,
                                "y": 37.51523664934895
                            },
                            {
                                "x": 127.04295256273272,
                                "y": 37.51535762440808
                            },
                            {
                                "x": 127.04332489693985,
                                "y": 37.51543272508142
                            },
                            {
                                "x": 127.04355053698788,
                                "y": 37.51547960516605
                            },
                            {
                                "x": 127.04418187102895,
                                "y": 37.51564690555654
                            },
                            {
                                "x": 127.04424927612057,
                                "y": 37.51568349315793
                            },
                            {
                                "x": 127.0442715529992,
                                "y": 37.51571070502863
                            },
                            {
                                "x": 127.04427109339863,
                                "y": 37.51574674345718
                            },
                            {
                                "x": 127.04412858365109,
                                "y": 37.51627721186876
                            },
                            {
                                "x": 127.04412858365109,
                                "y": 37.51627721186876
                            },
                            {
                                "x": 127.04481544672026,
                                "y": 37.5165260531019
                            },
                            {
                                "x": 127.04522183628437,
                                "y": 37.51659241269306
                            },
                            {
                                "x": 127.0454247444342,
                                "y": 37.5166481159896
                            },
                            {
                                "x": 127.0467790777666,
                                "y": 37.51689332791786
                            },
                            {
                                "x": 127.0467790777666,
                                "y": 37.51689332791786
                            },
                            {
                                "x": 127.04676707915648,
                                "y": 37.516947294302604
                            }
                        ]
                    },
                    midpoint: { x: midpoint?.lat, y: midpoint?.lng },
                    stopover: stopover.map(addr => ({
                        x: addr.lng,
                        y: addr.lat
                    })),
                    destination: {
                        x: destination.lng,
                        y: destination.lat
                        }

                }
            });
        }
    };

    return(
        <>
            <div class="func-container">
                <p style={{ fontWeight: '700' }}>목적지를 입력하고 중간장소로부터<br/>최단경로를 찾아보세요!</p>
                {addresses.map((addr, i) => (
                    <button
                    key={i}
                    className="address-button"
                    onClick={() => setActiveIndex(i)}
                    >
                    {addr.label || '출발지를 입력해주세요'}
                    </button>
                ))}
                <button class="add-button" onClick={handleAddFriend} disabled={addresses.length >= 3}><img src={addbuttonimg} alt='addbutton' height='16px' width='15px' /> 목적지 추가하기</button>
                <button class="find-button" onClick={handleFindWay}>최단경로 찾기</button>

                

                {/*
                {showAlert && (
                    <div className="bottom-alert">출발 장소를 입력해주세요.</div>
                )}*/}
            </div>
            {activeIndex !== null && (
                    <Sidebar
                    onClose={() => setActiveIndex(null)}
                    onSelect={(label, lat, lng) =>
                        handleSelectAddress(activeIndex, label, lat, lng)
                    }
                    />
                ) }
        </>
    );
};

export default FindWay;